{"ast":null,"code":"var _jsxFileName = \"C:\\\\FrontEndExcercises\\\\06.react\\\\React_The Complete Guide\\\\complete-guide\\\\src\\\\19.SPA Using React Router\\\\main project\\\\frontend\\\\src\\\\pages\\\\EventDetail.js\",\n  _s = $RefreshSig$();\nimport React, { Suspense } from \"react\";\nimport EventItem from \"../components/EventItem\";\nimport { Await, defer, json, redirect, useRouteLoaderData } from \"react-router-dom\";\nimport EventsList from \"../components/EventsList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EventDetailPage() {\n  _s();\n  const {\n    event,\n    events\n  } = useRouteLoaderData(\"event-detail\");\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \" loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 32\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(Await, {\n      resolve: event\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Await, {\n      resolve: events\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 12\n  }, this);\n}\n_s(EventDetailPage, \"OA7jEBfO3UI1aCR8ByPCigEHUtE=\", false, function () {\n  return [useRouteLoaderData];\n});\n_c = EventDetailPage;\nconst loadEvent = async id => {\n  const response = await fetch(`http://localhost:8080/events/${id}`);\n  if (!response.ok) {\n    throw json({\n      message: \"Could not fetch details for selected event.\"\n    }, {\n      status: 500\n    });\n  } else {\n    const resData = await response.json();\n    return resData.events;\n  }\n};\nconst loadEvents = async () => {\n  const response = await fetch('http://localhost:8080/events');\n  if (!response.ok) {\n    throw json({\n      message: \"Could not fetch events.\"\n    }, {\n      status: 500\n    });\n  } else {\n    const resData = await response.json();\n    return resData.events;\n  }\n};\nexport async function loader({\n  request,\n  params\n}) {\n  const id = params.eventId;\n  return defer({\n    event: loadEvent(id),\n    events: loadEvents()\n  });\n}\nexport async function action({\n  params,\n  request\n}) {\n  const id = params.eventId;\n  const response = await fetch(\"http://localhost:8080/events/\" + id, {\n    method: request.method\n  });\n  if (!response.ok) {\n    throw json({\n      message: \"Could not delete event\"\n    }, {\n      status: 500\n    });\n  }\n  return redirect(\"/events\");\n}\nvar _c;\n$RefreshReg$(_c, \"EventDetailPage\");","map":{"version":3,"names":["React","Suspense","EventItem","Await","defer","json","redirect","useRouteLoaderData","EventsList","jsxDEV","_jsxDEV","EventDetailPage","_s","event","events","fallback","children","fileName","_jsxFileName","lineNumber","columnNumber","resolve","_c","loadEvent","id","response","fetch","ok","message","status","resData","loadEvents","loader","request","params","eventId","action","method","$RefreshReg$"],"sources":["C:/FrontEndExcercises/06.react/React_The Complete Guide/complete-guide/src/19.SPA Using React Router/main project/frontend/src/pages/EventDetail.js"],"sourcesContent":["import React, {Suspense} from \"react\";\r\nimport EventItem from \"../components/EventItem\";\r\nimport {Await, defer, json, redirect, useRouteLoaderData} from \"react-router-dom\";\r\nimport EventsList from \"../components/EventsList\";\r\nexport default function EventDetailPage(){\r\n    const {event, events} = useRouteLoaderData(\"event-detail\");\r\n    return <Suspense fallback={<p> loading</p>}>\r\n        <Await resolve={event}></Await>\r\n        <Await resolve={events}></Await>\r\n    </Suspense>\r\n\r\n}\r\nconst loadEvent = async (id) => {\r\n\r\n    const response = await fetch(`http://localhost:8080/events/${id}`)\r\n    if (!response.ok){\r\n        throw json({message: \"Could not fetch details for selected event.\"}, {status:500})\r\n    }else{\r\n        const resData = await response.json();\r\n        return resData.events;\r\n    }\r\n}\r\nconst loadEvents = async() => {\r\n    const response = await fetch('http://localhost:8080/events');\r\n    if (!response.ok) {\r\n        throw json({message: \"Could not fetch events.\"}, { status: 500})\r\n    } else {\r\n        const resData = await response.json();\r\n        return resData.events;\r\n    }\r\n}\r\nexport async function loader({request, params}){\r\n    const id = params.eventId\r\n    return defer({\r\n        event: loadEvent(id),\r\n        events: loadEvents(),\r\n    })\r\n}\r\n\r\nexport async function action({params, request}){\r\n    const id = params.eventId;\r\n    const response = await fetch(\"http://localhost:8080/events/\"+id, {method: request.method});\r\n    if (!response.ok){\r\n        throw json({message: \"Could not delete event\"}, {status: 500})\r\n    }\r\n    return redirect(\"/events\")\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}